# Muaythai Next.js + Supabase

‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå Full-Stack ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ Next.js 15 ‡∏Å‡∏±‡∏ö Supabase (PostgreSQL) ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

## üöÄ ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ

- **Frontend**: Next.js 15 (App Router)
- **Backend**: Supabase (PostgreSQL Database, Authentication, Real-time)
- **Styling**: Tailwind CSS
- **Language**: TypeScript
- **Package Manager**: npm

## üìã ‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô

- Node.js 18+ 
- npm ‡∏´‡∏£‡∏∑‡∏≠ yarn
- ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ Supabase (‡∏ü‡∏£‡∏µ) - [‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà](https://app.supabase.com)

## üõ†Ô∏è ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á

### 1. Clone ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå

```bash
git clone <repository-url>
cd muaythai-next-postgres
```

### 2. ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Dependencies

```bash
npm install
```

### 3. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Supabase

#### 3.1 ‡∏™‡∏£‡πâ‡∏≤‡∏á Supabase Project

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà [Supabase Dashboard](https://app.supabase.com)
2. ‡∏Ñ‡∏•‡∏¥‡∏Å "New Project"
3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Organization (‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà)
4. ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:
   - **Name**: ‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
   - **Database Password**: ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏à‡∏≥‡πÑ‡∏î‡πâ
   - **Region**: ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏Å‡∏•‡πâ‡∏Å‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏°‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î (‡πÄ‡∏ä‡πà‡∏ô Southeast Asia)
   - **Pricing Plan**: Free (0 USD)
5. ‡∏Ñ‡∏•‡∏¥‡∏Å "Create new project" ‡πÅ‡∏•‡∏∞‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà

#### 3.2 ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å API Keys

1. ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Project Dashboard ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏°‡∏ô‡∏π‡∏ã‡πâ‡∏≤‡∏¢
2. ‡∏Ñ‡∏•‡∏¥‡∏Å **Settings** (‚öôÔ∏è) > **API**
3. ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ñ‡πà‡∏≤‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ:
   - **Project URL** (‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô Configuration)
   - **anon public** key (‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô Project API keys)

#### 3.3 ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå Environment Variables

‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `.env.local` ‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå root:

```bash
# ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏à‡∏≤‡∏Å .env.example
cp .env.example .env.local
```

‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå `.env.local`:

```env
SUPABASE_URL=https://your-project-id.supabase.co
NEXT_PUBLIC_NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here
```

### 4. ‡∏£‡∏±‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå

```bash
npm run dev
```

‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà [http://localhost:3000](http://localhost:3000)

## üìö ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### 1. Todo App (CRUD Operations)

#### ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á `todos` ‡πÉ‡∏ô Supabase

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Supabase Dashboard
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **SQL Editor** ‡πÉ‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏ã‡πâ‡∏≤‡∏¢
3. ‡∏Ñ‡∏•‡∏¥‡∏Å "+ New query"
4. ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ô SQL ‡∏ô‡∏µ‡πâ:

```sql
-- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á todos
create table todos (
  id bigint generated by default as identity primary key,
  task text not null,
  is_complete boolean default false,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Row Level Security
alter table todos enable row level security;

-- Policy: ‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ
create policy "Anyone can read todos"
  on todos for select
  to public
  using (true);

-- Policy: ‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏î‡πâ
create policy "Anyone can insert todos"
  on todos for insert
  to public
  with check (true);

-- Policy: ‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ
create policy "Anyone can update todos"
  on todos for update
  to public
  using (true);

-- Policy: ‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏•‡∏ö‡πÑ‡∏î‡πâ
create policy "Anyone can delete todos"
  on todos for delete
  to public
  using (true);
```

5. ‡∏Ñ‡∏•‡∏¥‡∏Å "Run" ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏î `Cmd/Ctrl + Enter`
6. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà [http://localhost:3000/examples/todos](http://localhost:3000/examples/todos)

### 2. Authentication

Authentication ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ! ‡πÑ‡∏õ‡∏ó‡∏µ‡πà:
- [http://localhost:3000/examples/auth](http://localhost:3000/examples/auth)

**‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏**: ‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î development Supabase ‡∏à‡∏∞‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô ‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏•:

1. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Supabase Dashboard
2. **Authentication** > **Settings**
3. ‡∏õ‡∏¥‡∏î "Enable email confirmations"

## üìÅ ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå

```
muaythai-next-postgres/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ app/                    # Next.js App Router (Pages & API Routes)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (auth)/            # Auth pages (login, signup, reset-password)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (dashboard)/       # Dashboard pages (user, partner, admin)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (public)/          # Public pages (about, contact, faq, etc.)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/               # API Routes
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/          # Authentication endpoints
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bookings/      # Booking endpoints
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ gyms/          # Gym endpoints
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payments/      # Payment endpoints
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ webhooks/      # Webhook handlers
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ gyms/              # Gym listing & detail pages
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ events/            # Event pages
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ shop/              # Shop pages
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx           # ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ layout.tsx         # Root layout
‚îÇ   ‚îú‚îÄ‚îÄ components/            # React Components (organized by type)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/                # UI primitives (buttons, cards, dialogs)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ shared/            # Shared components (header, footer, layout)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ features/          # Feature-specific components
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ auth/          # Authentication components
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ bookings/      # Booking components
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ gyms/          # Gym components
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ payments/      # Payment components
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ contact/       # Contact form
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ modals/        # Modal components
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ sections/      # Landing page sections
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ admin/         # Admin components
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ gym-management/  # Gym management UI
‚îÇ   ‚îú‚îÄ‚îÄ lib/                   # Core Libraries & Utilities
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/              # Authentication utilities
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ client.ts      # Client-side auth
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ server.ts      # Server-side auth
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database/          # Database utilities
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ supabase/      # Supabase configuration
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ client.ts  # Client-side Supabase
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ server.ts  # Server-side Supabase
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ middleware.ts  # Middleware helper
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/               # API utilities & middleware
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payments/          # Payment utilities (Stripe)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ email/             # Email utilities (Resend)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/             # General utilities
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cn.ts          # Class name utility
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ formatters.ts  # Data formatters
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ slug.ts        # Slug generation
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validators.ts  # Validation utilities
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/             # Custom React Hooks
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ constants.ts       # App constants
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ data.ts            # Static data
‚îÇ   ‚îú‚îÄ‚îÄ services/              # Business Logic Layer
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.service.ts    # Authentication service
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ gym.service.ts     # Gym service
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ booking.service.ts # Booking service
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ payment.service.ts # Payment service
‚îÇ   ‚îú‚îÄ‚îÄ types/                 # TypeScript Type Definitions
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app.types.ts       # App-wide types
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.types.ts      # Authentication types
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.types.ts  # Database types
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ api.types.ts       # API types
‚îÇ   ‚îú‚îÄ‚îÄ contexts/              # React Contexts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth-context.tsx   # Auth context
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ alert-context.tsx  # Alert context
‚îÇ   ‚îî‚îÄ‚îÄ middleware.ts          # Next.js Middleware
‚îú‚îÄ‚îÄ tests/                     # üß™ E2E Testing
‚îÇ   ‚îú‚îÄ‚îÄ e2e/                   # E2E test files
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ helpers.ts         # Test helper functions
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth-flow.spec.ts  # Auth flow tests
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin-gym-management.spec.ts  # Admin tests
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ login-existing-users.spec.ts  # Login tests
‚îÇ   ‚îú‚îÄ‚îÄ screenshots/           # Auto-generated screenshots
‚îÇ   ‚îî‚îÄ‚îÄ README.md              # Testing documentation
‚îú‚îÄ‚îÄ docs/                      # üìö Documentation
‚îÇ   ‚îú‚îÄ‚îÄ setup/                 # Setup guides
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DATABASE_SETUP.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ENV_SETUP.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SUPABASE_SETUP.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ EMAIL_SETUP_GUIDE.md
‚îÇ   ‚îú‚îÄ‚îÄ features/              # Feature documentation
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BOOKING_SYSTEM_GUIDE.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PARTNER_APPLICATION_GUIDE.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ROLE_BASED_DASHBOARD_GUIDE.md
‚îÇ   ‚îú‚îÄ‚îÄ api/                   # API documentation
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ STRIPE_API_REFERENCE.md
‚îÇ   ‚îú‚îÄ‚îÄ testing/               # Testing guides
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ E2E_TESTING_QUICKSTART.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ RUN_TESTS.md
‚îÇ   ‚îú‚îÄ‚îÄ ARCHITECTURE.md        # Architecture overview
‚îÇ   ‚îî‚îÄ‚îÄ CONTRIBUTING.md        # Contribution guide
‚îú‚îÄ‚îÄ supabase/                  # Supabase Configuration
‚îÇ   ‚îú‚îÄ‚îÄ migrations/            # Database migrations
‚îÇ   ‚îî‚îÄ‚îÄ config.toml            # Supabase config
‚îú‚îÄ‚îÄ scripts/                   # Utility scripts
‚îú‚îÄ‚îÄ .env.local                 # Environment variables (‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏á)
‚îú‚îÄ‚îÄ .env.example              # ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á environment variables
‚îú‚îÄ‚îÄ playwright.config.ts       # üß™ Playwright config
‚îú‚îÄ‚îÄ tsconfig.json             # TypeScript config (with path aliases)
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ README.md
```

### üéØ Path Aliases

‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÉ‡∏ä‡πâ path aliases ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ import ‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô:

```typescript
// ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÉ‡∏ä‡πâ
import { Button } from '../../../components/ui/button';

// ‡πÉ‡∏ä‡πâ
import { Button } from '@/components/ui';
```

**Path aliases ‡∏ó‡∏µ‡πà‡∏°‡∏µ:**
- `@/components/*` - Components
- `@/lib/*` - Libraries & utilities
- `@/types/*` - Type definitions
- `@/services/*` - Business logic services
- `@/contexts/*` - React contexts
- `@/app/*` - App router pages & API

> üí° **‡∏î‡∏π‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏î‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î**: ‡∏≠‡πà‡∏≤‡∏ô [docs/ARCHITECTURE.md](./docs/ARCHITECTURE.md) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å frontend/backend ‡πÅ‡∏•‡∏∞ data flow

## üîß ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### Client Component with Context

```tsx
'use client';

import { useAuth } from '@/contexts';
import { Button } from '@/components/ui';

export default function ProfilePage() {
  const { user, signOut } = useAuth();
  
  return (
    <div>
      <p>Welcome, {user?.email}</p>
      <Button onClick={signOut}>Logout</Button>
    </div>
  );
}
```

### Server Component with Service Layer

```tsx
import { GymService } from '@/services';
import { GymCard } from '@/components/features/gyms';

export default async function GymsPage() {
  const gymService = new GymService();
  const gyms = await gymService.getGyms();
  
  return (
    <div>
      {gyms.map(gym => <GymCard key={gym.id} gym={gym} />)}
    </div>
  );
}
```

### API Route with Service Layer

```tsx
// src/app/api/gyms/route.ts
import { NextResponse } from 'next/server';
import { GymService } from '@/services';

export async function GET() {
  try {
    const gymService = new GymService();
    const gyms = await gymService.getGyms();
    return NextResponse.json(gyms);
  } catch (error) {
    return NextResponse.json({ error: 'Failed to fetch gyms' }, { status: 500 });
  }
}
```

### Using Utilities

```tsx
import { cn } from '@/lib/utils';
import { formatCurrency } from '@/lib/utils';
import { createClient } from '@/lib/database';

// Class name utility
const className = cn('base-class', isActive && 'active-class');

// Format currency
const price = formatCurrency(1000); // "‡∏ø1,000.00"

// Database client
const supabase = createClient();
```

> üí° **‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°**: ‡∏≠‡πà‡∏≤‡∏ô [docs/ARCHITECTURE.md](./docs/ARCHITECTURE.md) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π patterns ‡πÅ‡∏•‡∏∞ best practices

## üé® ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á UI

‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ Tailwind CSS ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç:

- **‡∏™‡∏µ**: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏ô `tailwind.config.ts`
- **Font**: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏ô `src/app/layout.tsx`
- **Global CSS**: ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÉ‡∏ô `src/app/globals.css`

## üß™ E2E Automation Testing (NEW!)

‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö automation testing ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö authentication flow ‡∏ó‡∏±‡πâ‡∏á 3 roles:

### ‚úÖ Test Coverage
- **User Signup & Login** - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
- **Partner Application** - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏õ‡πá‡∏ô Partner ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏¢‡∏°‡∏ß‡∏¢
- **Admin Approval** - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏Ñ‡πà‡∏≤‡∏¢‡∏°‡∏ß‡∏¢‡πÇ‡∏î‡∏¢ Admin
- **Role-based Access** - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÅ‡∏ï‡πà‡∏•‡∏∞ role ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á dashboard ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

### üöÄ Quick Start
```bash
# Terminal 1: Start dev server
npm run dev

# Terminal 2: Run tests in UI mode
npm run test:e2e:ui
```

### üìö Testing Documentation
- üé¨ [RUN_TESTS.md](./RUN_TESTS.md) - ‡∏ß‡∏¥‡∏ò‡∏µ‡∏£‡∏±‡∏ô tests ‡πÅ‡∏ö‡∏ö step-by-step
- üöÄ [E2E_TESTING_QUICKSTART.md](./docs/E2E_TESTING_QUICKSTART.md) - Quick start guide
- üìñ [tests/README.md](./tests/README.md) - Full testing documentation
- üìã [TESTING_SUMMARY.md](./TESTING_SUMMARY.md) - ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á

### üéØ Test Commands
```bash
npm run test:e2e          # Run tests (headless)
npm run test:e2e:ui       # Run with Playwright UI
npm run test:e2e:debug    # Debug mode
npm run test:report       # View test report
```

## üìñ Resources & Documentation

### ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ô‡∏µ‡πâ

**Setup Guides:**
- üöÄ [Database Setup](./docs/setup/DATABASE_SETUP.md) - ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- ‚öôÔ∏è [Environment Setup](./docs/setup/ENV_SETUP.md) - ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ environment variables
- üîê [Supabase Setup](./docs/setup/SUPABASE_SETUP.md) - ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Supabase
- üìß [Email Setup](./docs/setup/EMAIL_SETUP_GUIDE.md) - ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•

**Feature Guides:**
- üìÖ [Booking System](./docs/features/BOOKING_SYSTEM_GUIDE.md) - ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏≠‡∏á‡∏Ñ‡πà‡∏≤‡∏¢‡∏°‡∏ß‡∏¢
- ü§ù [Partner Application](./docs/features/PARTNER_APPLICATION_GUIDE.md) - ‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£ Partner
- üë• [Role-Based Dashboard](./docs/features/ROLE_BASED_DASHBOARD_GUIDE.md) - Dashboard ‡πÅ‡∏ö‡πà‡∏á‡∏ï‡∏≤‡∏° role
- üèãÔ∏è [Gym Management](./docs/features/PARTNER_PACKAGE_MANAGEMENT_GUIDE.md) - ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡πà‡∏≤‡∏¢‡∏°‡∏ß‡∏¢

**Testing:**
- üß™ [E2E Testing Quickstart](./docs/testing/E2E_TESTING_QUICKSTART.md) - ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏î‡∏™‡∏≠‡∏ö E2E
- üéØ [Run Tests](./docs/testing/RUN_TESTS.md) - ‡∏ß‡∏¥‡∏ò‡∏µ‡∏£‡∏±‡∏ô tests

**Architecture:**
- üìò [Architecture Overview](./docs/ARCHITECTURE.md) - ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞ design patterns
- ü§ù [Contributing Guide](./docs/CONTRIBUTING.md) - ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏°‡∏µ‡∏™‡πà‡∏ß‡∏ô‡∏£‡πà‡∏ß‡∏°

### External Resources
- [Next.js Documentation](https://nextjs.org/docs)
- [Supabase Documentation](https://supabase.com/docs)
- [Playwright Documentation](https://playwright.dev) - üß™ E2E Testing Framework
- [Tailwind CSS Documentation](https://tailwindcss.com/docs)
- [TypeScript Documentation](https://www.typescriptlang.org/docs)

## üîí Security Best Practices

### Row Level Security (RLS)

Supabase ‡πÉ‡∏ä‡πâ PostgreSQL Row Level Security ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢:

```sql
-- ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡πÑ‡∏î‡πâ
create policy "Users can update own data"
  on table_name for update
  to authenticated
  using (auth.uid() = user_id);
```

### Environment Variables

- ‡∏´‡πâ‡∏≤‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ú‡∏¢‡πÑ‡∏ü‡∏•‡πå `.env.local`
- ‡πÉ‡∏ä‡πâ `NEXT_PUBLIC_` prefix ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏ú‡∏¢‡πÉ‡∏ô‡∏ù‡∏±‡πà‡∏á client
- ‡πÄ‡∏Å‡πá‡∏ö Service Role Key ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏ù‡∏±‡πà‡∏á client)

## üöÄ ‡∏Å‡∏≤‡∏£ Deploy

### Deploy ‡∏ö‡∏ô Vercel (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)

1. Push ‡πÇ‡∏Ñ‡πâ‡∏î‡∏Ç‡∏∂‡πâ‡∏ô GitHub
2. ‡πÑ‡∏õ‡∏ó‡∏µ‡πà [Vercel](https://vercel.com)
3. Import repository
4. ‡πÄ‡∏û‡∏¥‡πà‡∏° Environment Variables:
   - `SUPABASE_URL`
   - `NEXT_PUBLIC_NEXT_PUBLIC_NEXT_PUBLIC_NEXT_PUBLIC_NEXT_PUBLIC_NEXT_PUBLIC_NEXT_PUBLIC_NEXT_PUBLIC_NEXT_PUBLIC_SUPABASE_ANON_KEY`
5. Deploy!

### ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô Deploy

```bash
# Build ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå
npm run build

# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö production build
npm start
```

## üêõ Troubleshooting

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: "Error fetching user role: {}"

**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏**: ‡∏ï‡∏≤‡∏£‡∏≤‡∏á `user_roles` ‡πÅ‡∏•‡∏∞ `gyms` ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**: 
1. ‡∏£‡∏±‡∏ô `npm run check-db` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ß‡πà‡∏≤‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÑ‡∏´‡∏ô‡∏´‡∏≤‡∏¢‡πÑ‡∏õ
2. ‡∏î‡∏π‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏î‡πà‡∏ß‡∏ô‡πÉ‡∏ô `QUICK_DATABASE_FIX.md`
3. ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏±‡∏ô SQL migration ‡∏ó‡∏µ‡πà `supabase/migrations/partner_application_setup.sql` ‡πÉ‡∏ô Supabase SQL Editor

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: "relation does not exist"

**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏**: ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÉ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**: ‡∏£‡∏±‡∏ô SQL ‡πÉ‡∏ô Supabase SQL Editor (‡∏î‡∏π‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô)

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: "Invalid API key"

**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏**: ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô `.env.local` ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**: 
1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡πà‡∏≤‡πÉ‡∏ô Supabase Dashboard > Settings > API
2. ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏ü‡∏•‡πå `.env.local`
3. Restart dev server

### ‡∏õ‡∏±‡∏ç‡∏´‡∏≤: Auth ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

**‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏**: Email confirmation ‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà

**‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç**: 
1. Supabase Dashboard > Authentication > Settings
2. ‡∏õ‡∏¥‡∏î "Enable email confirmations" (‡πÄ‡∏â‡∏û‡∏≤‡∏∞ development)

## üìù License

MIT License - ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£

## ü§ù Contributing

‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏£‡∏±‡∏ö Pull Requests ‡πÅ‡∏•‡∏∞ Issues!

---

‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢ ‚ù§Ô∏è ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ Next.js ‡πÅ‡∏•‡∏∞ Supabase
